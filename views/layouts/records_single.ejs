<!doctype html>
<html>

<head>
    <base href="/">
    <script src="/dmxAppConnect/dmxAppConnect.js"></script>
    <meta charset="UTF-8">
    <title>Records Detail</title>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css" integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc" crossorigin="anonymous" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
    <script src="/dmxAppConnect/dmxRouting/dmxRouting.js" defer></script>
    <link rel="stylesheet" href="/dmxAppConnect/dmxBootstrap5TableGenerator/dmxBootstrap5TableGenerator.css" />
    <script src="/dmxAppConnect/dmxDataTraversal/dmxDataTraversal.js" defer></script>
    <script src="/dmxAppConnect/dmxFormatter/dmxFormatter.js" defer></script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script>
        <app.use(express.static('assets'))>
    </script>
    <style>
        body {
            font-family: "Lato", sans-serif
        }

        .mySlides {
            display: none
        }

        w3-col clearfix::after {
            content: "";
            clear: both;
            display: table;

            .w3-justify {
                margin: 10;
                padding-left: 10
            }
        }
    </style>

    <head>

        <!-- Navbar -->
        <div class="w3-top">
            <div class="w3-bar w3-black w3-card">
                <a class="w3-bar-item w3-button w3-padding-large w3-hide-medium w3-hide-large w3-right" href="javascript:void(0)" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
                <a href="/#home" class="w3-bar-item w3-button w3-padding-large">INICIO</a>
                <a href="/#discover" class="w3-bar-item w3-button w3-padding-large w3-hide-small">HALLAZGO</a>
                <a href="/#drupal" class="w3-bar-item w3-button w3-padding-large w3-hide-small">APPS</a>
                <a href="/#pgadmin" class="w3-bar-item w3-button w3-padding-large w3-hide-small">BASE DE DATOS</a>
                <!-- CPG Added Single Record and Multirecord views dropdown -->
                <div class="w3-dropdown-hover w3-hide-small">
                    <button class="w3-padding-large w3-button" title="More">REGISTROS<i class="fa fa-caret-down"></i></button>
                    <div class="w3-dropdown-content w3-bar-block w3-card-4">
                        <a href="/records_multi" class="w3-bar-item w3-button">Registros, Listado</a>
                        <a href="/records_detail" class="w3-bar-item w3-button">Registros, Detalles</a>
                        <a href="/dental" class="w3-bar-item w3-button">Registros Dentales</a>
                        <a href="/img_viewer" class="w3-bar-item w3-button">Listado Imágenes</a>
                    </div>
                </div>

                <!-- Btn w/dropdown begins -->
                <div class="w3-dropdown-hover w3-hide-small">
                    <button class="w3-padding-large w3-button" title="More">EQUIPO <i class="fa fa-caret-down"></i></button>
                    <div class="w3-dropdown-content w3-bar-block w3-card-4">
                        <a href="/#team" class="w3-bar-item w3-button">Dr. Nicolaus Seeleld</a>
                        <a href="/#team" class="w3-bar-item w3-button">Lic. Leticia Jiménez Hernández</a>
                        <a href="/#team" class="w3-bar-item w3-button">Dr. des.Carlos Pallan Gayol</a>
                        <a href="/#team" class="w3-bar-item w3-button">Lic. Félix Camacho Zamora</a>
                        <a href="/#team" class="w3-bar-item w3-button">Rest. Gaspar Panti Dzul</a>
                        <a href="/#team" class="w3-bar-item w3-button">Rest. Anabel Cambranis Alfaro</a>
                        <a href="/#team" class="w3-bar-item w3-button">Rest. Valentín Hernández Canche</a>
                         <a href="#team" class="w3-bar-item w3-button">Lic. Yolanda Espinosa Fernández</a>
                    </div>
                </div>
                <!-- Btn w/dropdown ends -->
                <!-- Btn w/dropdown begins -->
                <div class="w3-dropdown-hover w3-hide-small">
                    <button class="w3-padding-large w3-button" title="features">CARACTERÍSTICAS <i class="fa fa-caret-down"></i></button>
                    <div class="w3-dropdown-content w3-bar-block w3-card-4">
                        <a href="/#catalog" class="w3-bar-item w3-button">Catálogo Elementos óseos</a>
                        <a href="/#single_rec" class="w3-bar-item w3-button">Registros vista de detalles</a>
                        <a href="/#map" class="w3-bar-item w3-button">Mapa Interactivo</a>
                        <a href="/#3d_models" class="w3-bar-item w3-button">Modelos 3D selectos</a>
                    </div>
                </div>
                <!-- Btn w/dropdown ends -->
                <a href="/#upcoming" class="w3-bar-item w3-button w3-padding-large w3-hide-small">CONFERENCIAS</a>
                <a href="/#news" class="w3-bar-item w3-button w3-padding-large w3-hide-small">NOTICIAS</a>
                <a href="/#publications" class="w3-bar-item w3-button w3-padding-large w3-hide-small">PUBLICACIONES</a>

                <!--- CPG: Search button top top right corner -->
                <a href="javascript:void(0)" class="w3-padding-large w3-hover-red w3-hide-small w3-right"><i class="fa fa-search"></i></a>
            </div>
        </div>

        <!-- Navbar on small screens (remove the onclick attribute if you want the navbar to always show on top of the content when clicking on the links) -->
        <div id="navDemo" class="w3-bar-block w3-black w3-hide w3-hide-large w3-hide-medium w3-top" style="margin-top:46px">
            <a href="/#discover" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Hallazgo</a>
            <a href="/#drupal" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Aplicaciones</a>
            <a href="/#pgadmin" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Base de Datos</a>
            <a href="/#catalog" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Catálogo</a>
            <a href="/#single_rec" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Registros, Vista de Detalles</a>
            <a href="/#map" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">Mapa Interactivo</a>
        </div>

    </head>

<style>
    /*from tutorial https://stackoverflow.com/questions/25448511/pure-css-ellipsis-for-three-or-more-lines-of-text */
    @import "compass/css3";

    @import url(https://fonts.googleapis.com/css?family=Open+Sans:400,600,700);

    * {
        margin: 0;
        padding: 0;
        @include box-sizing(border-box);
    }

    body {
        padding: 3em 0em;
        font-family: 'Open Sans', Arial, sans-serif;
        color: #cf6824;
        background: #f7f5eb;
    }

    $font-size: auto;
    $line-height: 0.4;
    $lines-to-show: 5;

    td {
        widht: 80;
        max-width: 100;
        max-height: 30;
    }

    td:nth-child(1) {
        width: 5%;
    }

    /* ID */
    td:nth-child(2) {
        width: 50%;
    }


    .modern {
        max-width: 120;
        max-width: 60;
    }

    #Table2 tr {
        widht: 20;
        max-width: 20;
        max-height: 10;
    }

    td:nth-child(1) {
        width: 5%;
    }

    /* ID */
    td:nth-child(2) {
        width: 50%;
    }


    .modern {
        max-width: 120;
        max-width: 60;
    }

    #Table2 {
        border: 1px solid black;
        table-layout: auto;
        width: 800px;
    }

    #Table2 th,
    td {
        border: 1px solid black;
        width: 100px;
        overflow: hidden;
    }

    #Table2 th:nth-child(1) {
        width: 5%;
    }

    /* ID */
    #Table2 th:nth-child(2) {
        width: 5%;
    }

    #Table2 th:nth-child(3) {
        width: 5%;
    }

    /* ID */
    #Table2 th:nth-child(4) {
        width: 5%;
    }

    #Table2 th:nth-child(5) {
        width: 5%;
    }

    /* ID */
    #Table2 th:nth-child(6) {
        width: 5%;
    }

    #Table2 th:nth-child(7) {
        width: 5%;
    }

    /* ID */
    #Table2 th:nth-child(8) {
        width: 5%;
    }

    #Table2 th:nth-child(9) {
        width: 5%;
    }

    /* ID */
    #Table2 th:nth-child(10) {
        width: 5%;
    }

    #Table2 th:nth-child(11) {
        width: 5%;
    }

    /* ID */
    #Table2 th:nth-child(12) {
        width: 5%;
    }

    /* ID */
    #Table2 th:nth-child(13) {
        width: 5%;
    }

    /* ID */
    #Table2 th:nth-child(14) {
        width: 5%;
    }

    .container-fluid {
        /* background-color: #fff;
    width: 100px;
    margin: 10px; */
        align: left;
        text-align: left;
        line-height: 25px;
        font-size: 12px;
    }

    #col3 {
        position: relative;
        top: -50px;
        right: 50px;
    }

    #col4 (width: 150x;

    ) h5 {
        display: block;
        /* Fallback for non-webkit */
        display: -webkit-box;
        max-width: auto;
        height: $font-size*$line-height*$lines-to-show;
        /* Fallback for non-webkit */
        margin: 0 auto;
        font-size: 2 px;
        line-height: $line-height;
        -webkit-line-clamp: 5;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
    }
</style>

<body is="dmx-app" id="gallery">
    <dmx-serverconnect id="sc_Images" url="/api/query12_mod"></dmx-serverconnect>
    <!--CODE   BELOW WAS CRITICAL TO MAKE THE SNIPPET WORK WITH UPDATING IMAGES-->
    <dmx-data-view id="dview_images" dmx-bind:data="sc_Images.data.query_bild2" filter="(fk_records == deDetail2.data.id_record)"></dmx-data-view>
    <dmx-serverconnect id="sc_List" url="/api/query_JSON5_modified"></dmx-serverconnect>
    <dmx-serverconnect id="sc_Details" url="/api/query_JSON5_modified3"></dmx-serverconnect>
    <dmx-data-detail id="deDetail2" dmx-bind:data="sc_Details.data.custom" key="id_record"></dmx-data-detail>

    <div class="container-fluid">
        <div class="row">
            <div class="col-3">
                <h3 class="text-danger">Registros</h3>
                <table class="table table-striped table-bordered" id="Table1">
                    <thead>
                        <tr>
                            <th>Obj,</th>
                            <th>Name</th>
                        </tr>
                    </thead>
                    <tbody is="dmx-repeat" dmx-generator="bs5table" dmx-bind:repeat="sc_List.data.custom" id="tableRepeat1">
                        <tr dmx-on:click="deDetail2.select(id_record)" dmx-class:bg-warning="(id_record == deDetail2.data.id_record)">
                            <td dmx-text="obj_designation"></td>
                            <td dmx-text="obj_name"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-6 col-xxl-9">
                <h3 class="text-danger">Detalles del Registro</h3>


                <div class="row" dmx-hide="deDetail2.data">
                    <div class="col">
                        <h5 class="text-black-50 fw-bold">Para ver los detalles del registro, seleccione los registros en el panel de la izquierda</h5>
                    </div>
                </div>
                <div class="row" dmx-show="deDetail2.data">
                    <div class="col">
                        <table class="table table-striped table-bordered" id="Table2">
                            <tbody dmx-generator="bs5table" dmx-populate="sc_Details.data.custom">
                                <tr dmx-show="sc_Details.data">
                                    <th>ID registro</th>
                                    <td dmx-text="deDetail2.data.id_record"></td>
                                </tr>
                                <tr>
                                    <th>Estatus obj.</th>
                                    <td dmx-text="deDetail2.data.obj_status"></td>
                                </tr>
                                <tr>
                                    <th>Designación</th>
                                    <td dmx-text="deDetail2.data.obj_designation"></td>
                                </tr>
                                <tr>
                                    <th>No. Categoría</th>
                                    <td dmx-text="deDetail2.data.cat_name"></td>
                                </tr>
                                <tr>
                                    <th>Nom. Categoría</th>
                                    <td dmx-text="deDetail2.data.cat_value"></td>
                                </tr>
                                <tr>
                                    <th>Nom. Objeto</th>
                                    <td dmx-text="deDetail2.data.obj_name"></td>
                                </tr>
                                <tr>
                                    <th>Descriptor</th>
                                    <td dmx-text="deDetail2.data.obj_label"></td>
                                </tr>
                                <tr>
                                    <th>Núm. Lote</th>
                                    <td dmx-text="deDetail2.data.lote_number"></td>
                                </tr>
                                <tr>
                                    <th>Cuadrante xyz</th>
                                    <td dmx-text="deDetail2.data.find_location"></td>
                                </tr>
                                <tr>
                                    <th>Fecha registro</th>
                                    <td dmx-text="deDetail2.data.date_documented"></td>
                                </tr>
                                <tr>
                                    <th>Descripción</th>
                                    <td dmx-text="deDetail2.data.obj_description"></td>
                                </tr>
                                <tr>
                                    <th>Fecha captura</th>
                                    <td dmx-text="deDetail2.data.set_timestamp"></td>
                                </tr>
                                <tr>
                                    <th>Design. INAH</th>
                                    <td dmx-text="deDetail2.data.informe_designation"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="col-3" id="col3">
                        <h3 class="text-danger">Imágenes</h3>
                        <div class="row" dmx-show="dview_images.items">
                            <div class="col4" dmx-repeat:rpt_images="dview_images.data">
                                <div class="card w-100" id="card1">
                                    <div class="card-header" dmx-bind:title="dview_images.data[0].image_number"</div>{{dview_images.data[$index].image_number}}
                                        <img class="card-img-top" alt="Card image cap" dmx-bind:src="thumb">
                                        <div class="card-body" dmx-text="'ID registro: '+dview_images.data[$index].fk_records+' ; descripción/ y créditos: '+dview_images.data[$index].caption+'; archivo: '+dview_images.data[$index].filename">
                                            <h4 class="card-title"></h4>
                                            <p class="card-text"></p>
                                            <a href="#" class="btn btn-primary">Go somewhere</a>
                                        </div>
                                    </div>
                                    <div dmx-repeat:repeat1="(sc_Images.data.query_bild2[0].id_images == deDetail2.data.id_record)"></div>

                                </div>

                            </div>
                        </div>

                    </div>
                </div>

            </div>


        </div>
        <div is="dmx-view" id="content">
            <%- await include(content, locals); %>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>

</html>
